@page "/pvcs"

@using Braveior.KubeAssist.Services
@using Braveior.KubeAssist.Services.Models
@inject KubernetesService KubernetesService

<MudTable Dense="true" Items="@PVCList" Hover="true" Breakpoint="Breakpoint.Sm">
    <HeaderContent>
        <MudTh>Name</MudTh>
        <MudTh>Namespace</MudTh>
        <MudTh>StorageClass</MudTh>
        <MudTh>Phase</MudTh>
        <MudTh>Volume Name</MudTh>
        <MudTh>Resource Requests Storage</MudTh>
        <MudTh>Access Mode</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Name">@context.Name</MudTd>
        <MudTd DataLabel="Namespace">@context.Namespace</MudTd>
        <MudTd DataLabel="StorageClass">@context.StorageClass</MudTd>
        <MudTd DataLabel="Phase">@context.Phase</MudTd>
        <MudTd DataLabel="VolumeName">@context.VolumeName</MudTd>
        <MudTd DataLabel="ResourceRequestsStorage">@context.ResourceRequestsStorage</MudTd>
        <MudTd DataLabel="AccessMode">@context.AccessMode</MudTd>
    </RowTemplate>
</MudTable>


@code
{
        [Inject]
        private IState<KubeStateState> KubeStateState { get; set; }
    protected override void OnInitialized()
    {
        LoadPersistenceVolumes();
        base.OnInitialized();
    }

    private void LoadPersistenceVolumes()
    {
        if (KubeStateState.Value.KubeState != null)
        {
            PVCList = KubeStateState.Value.KubeState.PersistentVolumeClaims;
        }
    }
    private static IEnumerable<PersistentVolumeClaim> PVCList { get; set; }


}
